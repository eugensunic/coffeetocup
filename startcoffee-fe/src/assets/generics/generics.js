!function(e){function t(t){for(var i,a,s=t[0],d=t[1],l=t[2],u=0,m=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&m.push(r[a][0]),r[a]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(e[i]=d[i]);for(c&&c(t);m.length;)m.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,s=1;s<n.length;s++){var d=n[s];0!==r[d]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},r={0:0},o=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=d;o.push([98,1]),n()}({53:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);n(53),n(10),n(14),n(50),n(82),n(84),n(85);var i={FORGOT_PASSWORD:"/api/password/forgot",RESET_PASSWORD:"/api/password/reset",REGISTER:"/api/register",LOGIN:"/login",LOGOUT:"/logout"},r={SERVER_ERROR:"Server error occurred, if it persists, contact administrator",UNSUCCESSFUL_LOGIN:"Wrong mail or password, try again",SUCCESSFUL_LOGIN:"Login successful!",EMAIL_EXISTS:"User with provided email already exists",USERNAME_EXISTS:"User with provided username already exists",SUCCESSFUL_REGISTRATION:"User registration successful!",FORGOT_PASSWORD_NON_EXISTING_MAIL:"Provided email does not exist in database",RESET_PASSWORD_TEXT:"Your reset query may not longer be valid, try again or <a href='/forgot-password'>Reset password again</a>"},o={SERVER_ERROR:"server_error"},a={TIMEOUT_TIME:6e3},s={NAME:"auth"},d={registered:"registered"},l=null;function c(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function u(e){return!e}function m(e){return e.length<5}function p(e){return e.length<5}var v=function(){return!!g("auth")},g=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},f=function(){var e=new Date,t=1===e.getDate().toString().length?"0"+e.getDate().toString():e.getDate().toString();return(1===(e.getMonth()+1).toString().length?"0"+(e.getMonth()+1).toString():(e.getMonth()+1).toString())+"/"+t+"/"+e.getFullYear()+", "+(1===e.getHours().toString().length?"0"+e.getHours().toString():e.getHours().toString())+":"+(1===e.getMinutes().toString().length?"0"+e.getMinutes().toString():e.getMinutes().toString())};var y=document.getElementById("first-name"),E=document.getElementById("last-name"),h=document.getElementById("register-username"),w=document.getElementById("register-email"),L=document.getElementById("register-password"),S=document.getElementById("register"),b=document.getElementById("register-form-wrapper"),I=!1,B=13;function T(e,t){if(I=!0,O(),k(),y.classList.remove("is-invalid"),E.classList.remove("is-invalid"),h.classList.remove("is-invalid"),w.classList.remove("is-invalid"),L.classList.remove("is-invalid"),!function(e,t,n,i,r){return!u(e)&&!u(t)&&!p(n)&&c(i)&&!!r&&!m(r)}(y.value,E.value,h.value,e.value,t.value))return u(y.value)&&y.classList.add("is-invalid"),u(E.value)&&E.classList.add("is-invalid"),p(h.value)&&h.classList.add("is-invalid"),c(e.value)||e.classList.add("is-invalid"),m(t.value)&&t.classList.add("is-invalid"),void setTimeout((function(e){var t;(t=document.querySelector(".is-invalid"))&&t.previousElementSibling.scrollIntoView()}),10);var n,a;n=document.getElementById("register-submit-wrapper"),(a=document.createElement("div")).classList.add("generics-loader"),a.id="register-spinner",a.style="margin-top: 50px; margin-bottom: 0px;",n.insertBefore(a,n.firstChild),S.disabled=!0,fetch(i.REGISTER,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({firstName:y.value,lastName:E.value,username:h.value,email:e.value,password:t.value,registrationTime:f()})}).then((function(e){return e.json()})).then((function(e){O(),S.disabled=!1,e.emailExists?R("alert-danger",r.EMAIL_EXISTS):e.usernameExists?R("alert-danger",r.USERNAME_EXISTS):(R("alert-success",r.SUCCESSFUL_REGISTRATION),setTimeout((function(){localStorage.setItem(d.registered,"true"),location.href="/"}),1200),y.value="",E.value="",h.value="",w.value="",L.value="")})).catch((function(e){O(),S.disabled=!1,window.dispatchEvent(new Event(o.SERVER_ERROR))}))}function O(){var e=document.getElementById("register-spinner");e&&e.parentNode.removeChild(e)}function R(e,t){k();var n=document.getElementById("register-submit-wrapper"),i=document.createElement("div");i.id="register-backend-message",i.classList.add("alert"),i.classList.add(e),i.style.marginTop="30px",i.innerText=t,i.role="alert",n.insertBefore(i,n.firstChild)}function k(){var e=document.getElementById("register-backend-message");e&&e.parentNode.removeChild(e)}n(90),n(95);var C=document.getElementById("login-email"),N=document.getElementById("login-password"),x=document.getElementById("login"),_=document.getElementsByClassName("modal-content")[0],A=document.getElementById("open-login"),M=document.getElementsByClassName("close")[0],P=!1,D=!1,U=document.getElementById("google-login"),j=document.getElementById("facebook-login"),G=document.getElementById("forgot-password-navigation"),W=document.getElementById("open-sign-up"),F=document.getElementById("login-pwd-err-1"),H=document.getElementById("login-pwd-err-2"),V=13,X=27;function J(e,t){if(P=!0,Z(),K(),z(),!function(e,t){return c(e)&&!!t&&!m(t)}(e.value,t.value))return c(e.value)||e.classList.add("is-invalid"),void(u(t.value)?(t.classList.add("is-invalid"),F.style.display="inline-block",H.style.display="none"):m(t.value)&&(t.classList.add("is-invalid"),F.style.display="none",H.style.display="inline-block"));!function(){D=!0;var e=document.getElementById("login-submit-wrapper"),t=document.createElement("div");t.classList.add("generics-loader"),t.id="login-spinner",e.insertBefore(t,e.firstChild)}(),x.disabled=!0,fetch(i.LOGIN,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({email:e.value,password:t.value})}).then((function(e){return e})).then((function(e){if(D=!1,e.status>=500)throw Z(),x.disabled=!1,new Error;return 200!==e.status?(Z(),t.value="",x.disabled=!1,void $("alert-danger",r.UNSUCCESSFUL_LOGIN)):window.location.href.includes("shared/")?window.location.reload():void(window.location.href=history.state?history.state.url:"/profile")})).catch((function(e){D=!1,Z(),x.disabled=!1,$("alert-danger",r.SERVER_ERROR),t.value=""}))}function z(){C.classList.remove("is-invalid"),N.classList.remove("is-invalid"),F.style.display="none",H.style.display="none"}function q(){N.value=""}function Y(e){if(e.which===X||e.keyCode===X)return P=!1,document.getElementsByClassName("close")[0].click(),z(),K(),void document.removeEventListener("keyup",Y)}function Z(){var e=document.getElementById("login-spinner");e&&e.parentNode.removeChild(e)}function $(e,t){K();var n=document.getElementById("login-submit-wrapper"),i=document.createElement("div");i.id="login-backend-message",i.classList.add("alert"),i.classList.add(e),i.style.marginTop="",i.innerText=t,i.role="alert",n.insertBefore(i,n.firstChild)}function K(){var e=document.getElementById("login-backend-message");e&&e.parentNode.removeChild(e)}function Q(e){"login-modal-fade-in"===e.target.id&&(P=!1,z(),K(),q(),document.removeEventListener("click",Q))}var ee=document.getElementById("forgot-password-email"),te=document.getElementById("forgot-password"),ne=document.getElementById("forgot-password-verification-wrapper"),ie=!1;function re(){var e=document.getElementById("forgot-password-spinner");e&&e.parentNode.removeChild(e)}var oe=document.getElementById("reset-password-input"),ae=document.getElementById("reset-password"),se=document.getElementById("reset-password-verification-wrapper"),de=document.getElementById("reset-pwd-err-1"),le=document.getElementById("reset-pwd-err-2"),ce=!1;function ue(){var e=document.getElementById("reset-password-spinner");e&&e.parentNode.removeChild(e)}var me=document.getElementById("open-sign-up"),pe=document.getElementById("home-page-first-btn-main"),ve=document.getElementById("btn-get-started"),ge=document.getElementById("btn-profile"),fe=document.getElementById("btn-coffees"),ye=document.getElementById("btn-community"),Ee=document.getElementById("open-login");window.addEventListener("server_error",(function(){console.log("Global error occured"),document.getElementById("global-error-message")&&document.getElementById("global-error-message").parentNode.removeChild(document.getElementById("global-error-message")),window.scrollTo(0,0);var e=document.createElement("div"),t=document.body;e.id="global-error-message",e.classList.add("alert"),e.classList.add("alert-danger"),e.style.textAlign="center",e.style.paddingTop="10px",e.innerText="Server error occurred, if it persists, contact administrator",e.role="alert",t.insertBefore(e,t.firstChild),clearTimeout(l),l=setTimeout((function(){e&&e.parentNode.removeChild(e)}),a.TIMEOUT_TIME)})),v()?document.getElementById("btn-community")&&document.getElementById("btn-coffees")&&(document.getElementById("btn-community").parentElement.style.display="",document.getElementById("btn-coffees").parentElement.style.display=""):document.getElementById("btn-community")&&document.getElementById("btn-coffees")&&(document.getElementById("btn-community").parentElement.style.display="none",document.getElementById("btn-coffees").parentElement.style.display="none"),me&&ge&&fe&&ye&&(ge.addEventListener("click",(function(e){if(e.preventDefault(),!v())return Ee.click(),void history.replaceState({url:"/profile"},null);window.location.href="/profile"})),fe.addEventListener("click",(function(e){if(e.preventDefault(),!v())return Ee.click(),void history.replaceState({url:"/coffees"},null);window.location.href="/coffees"})),ye.addEventListener("click",(function(e){if(e.preventDefault(),!v())return Ee.click(),void history.replaceState({url:"/community"},null);window.location.href="/community"})),me.addEventListener("click",(function(e){window.location.href="/register"})),pe&&pe.addEventListener("click",(function(e){e.preventDefault(),window.location.href="/brewcollectexplore"})),ve&&ve.addEventListener("click",(function(e){e.preventDefault(),window.location.href="/register"}))),function(){if(_&&C&&N&&A&&x&&M){if(window.location.href.includes("openLogin")&&(A.click(),history.replaceState(null,null,"/")),"true"===localStorage.getItem(d.registered)&&(localStorage.removeItem(d.registered),A.click()),v(s.NAME)){W.style.display="none",function(){if(!A)return;A.parentNode.removeChild(A)}();var e=document.querySelector("#angular-header-navbar-title-sm");if(e&&e.classList.remove("logo-logged-in"),"/"===window.location.pathname){var t=document.getElementById("logo-wrapper");t&&t.classList.add("logo-wrapper-margin"),function(){if(document.getElementById("my-account-header-label"))return;var e=document.getElementById("img-bg-wrapper"),t=document.createElement("div");t.id="logout-wrapper",t.className="dropdown";var n=document.createElement("div");n.id="my-account-header-label",n.className="nav-link dropdown-toggle",n.textContent="My account",n.setAttribute("data-toggle","dropdown");var r=document.createElement("div");r.id="my-account-dropdown",r.className="dropdown-menu",r.style.position="static!important",r.style.transform="none";var o=document.createElement("a");o.id="navigate-to-s",o.className="dropdown-item",o.style.zIndex="1000",o.textContent="User settings",o.href="/settings";var a=document.createElement("div");a.id="logout",a.classList.add("dropdown-item","logout-action-desktop"),a.textContent="Logout",a.addEventListener("click",(function(e){e.preventDefault(),fetch(i.LOGOUT,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({loggedOutTime:f()})}).then((function(e){e.ok&&(window.location.href="/")})).catch((function(e){window.location.href="/"}))})),r.appendChild(o),r.appendChild(a),t.appendChild(n),t.appendChild(r),e.appendChild(t)}()}}else{var n=document.querySelector("#angular-header-navbar-title-sm");n&&n.classList.add("logo-logged-in"),x.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),J(C,N)}))}A.addEventListener("click",(function(){document.addEventListener("keyup",Y),document.addEventListener("click",Q)})),_.addEventListener("keypress",(function(e){e.which!==V&&e.keyCode!==V||D||J(C,N)})),U.addEventListener("click",(function(e){e.preventDefault(),window.location.href="/auth/google"})),j.addEventListener("click",(function(e){e.preventDefault(),window.location.href="/auth/facebook"})),G.addEventListener("click",(function(e){e.preventDefault(),window.location.href="/forgot-password"})),M.addEventListener("click",(function(){P=!1,z(),K(),q()})),C.addEventListener("input",(function(e){e.preventDefault(),e.stopPropagation(),K(),P&&(c(C.value)?C.classList.remove("is-invalid"):C.classList.add("is-invalid"))})),N.addEventListener("input",(function(e){if(e.preventDefault(),e.stopPropagation(),K(),P){if(u(N.value))return F.style.display="inline-block",void(H.style.display="none");if(m(N.value))return F.style.display="none",H.style.display="inline-block",void N.classList.add("is-invalid");N.classList.remove("is-invalid"),F.style.display="none",H.style.display="none"}}))}}(),y&&E&&h&&w&&L&&S&&b&&(S.addEventListener("click",(function(){return T(w,L)})),y.addEventListener("input",(function(){k(),I&&(u(y.value)?y.classList.add("is-invalid"):y.classList.remove("is-invalid"))})),E.addEventListener("input",(function(){k(),I&&(u(E.value)?E.classList.add("is-invalid"):E.classList.remove("is-invalid"))})),h.addEventListener("input",(function(){k(),I&&(p(h.value)?h.classList.add("is-invalid"):h.classList.remove("is-invalid"))})),w.addEventListener("input",(function(){k(),I&&(c(w.value)?w.classList.remove("is-invalid"):w.classList.add("is-invalid"))})),L.addEventListener("input",(function(){k(),I&&(m(L.value)?L.classList.add("is-invalid"):L.classList.remove("is-invalid"))})),b.addEventListener("keypress",(function(e){e.which!==B&&e.keyCode!==B||T(w,L)}))),ee&&te&&ne&&(ne.innerHTML="",te.addEventListener("click",(function(){return e=ee,ie=!0,(t=document.getElementById("forgot-password-backend-message"))&&t.parentNode.removeChild(t),ee.classList.remove("is-invalid"),void(c(e.value)?(n=document.getElementById("forgot-password-submit-wrapper"),(a=document.createElement("div")).id="forgot-password-spinner",a.classList.add("generics-loader"),a.style.top="35px",n.insertBefore(a,n.firstChild),te.disabled=!0,fetch(i.FORGOT_PASSWORD,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({confirmedEmail:e.value})}).then((function(e){return e.json()})).then((function(e){var t,n,i,o,a,s=e.user;if(re(),te.disabled=!1,!s)return t="alert-danger",n=r.FORGOT_PASSWORD_NON_EXISTING_MAIL,i=document.getElementById("forgot-password-submit-wrapper"),(o=document.createElement("div")).id="forgot-password-backend-message",o.classList.add("alert"),o.classList.add(t),o.style.marginTop="",o.style.maxWidth="500px",o.style.top="10px",o.innerText=n,o.role="alert",void i.insertBefore(o,i.firstChild);(a=document.getElementById("forgot-password-wrapper")).parentElement.removeChild(a),ne.className="user-access-box-wrapper",ne.innerHTML=' \n   <h5 id="forgot-password-verification-title" class="user-access-box-wrapper-title horizontal-line ">\n        Verify your email account\n   </h5>\n   <div id="forgot-password-confirmation-text-wrapper" class="container text-center">\n      <p class="user-access-text">\n        We\'ve sent you a confirmation email.\n        <br />\n        Use the received password to login.\n        <p>\n         <a href="/"> Back to login</a>\n        </p>\n      </p>\n   </div>'})).catch((function(e){re(),te.disabled=!1,window.dispatchEvent(new Event(o.SERVER_ERROR))}))):e.classList.add("is-invalid"));var e,t,n,a})),ee.addEventListener("input",(function(){ie&&(c(ee.value)?ee.classList.remove("is-invalid"):ee.classList.add("is-invalid"))}))),ae&&se&&(se.innerHTML="",ae.addEventListener("click",(function(){return e=oe,ce=!0,(t=document.getElementById("reset-password-backend-message"))&&t.parentNode.removeChild(t),oe.classList.remove("is-invalid"),void(function(e){return!!e&&!m(e)}(e.value)?(d=document.getElementById("reset-password-submit-wrapper"),(l=document.createElement("div")).id="reset-password-spinner",l.classList.add("generics-loader"),l.style.top="35px",d.insertBefore(l,d.firstChild),ae.disabled=!0,fetch(i.RESET_PASSWORD,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:(n=window.location.pathname,a="reset-password/",s=n.substring(n.indexOf(a)+a.length),s),password:e.value})}).then((function(e){return{status:e.status}})).then((function(e){if(ue(),ae.disabled=!1,e.status>=500)throw new Error;if(e.status>400&&e.status<500)return t="alert-danger",n=r.RESET_PASSWORD_TEXT,i=document.getElementById("reset-password-submit-wrapper"),(o=document.createElement("div")).id="reset-password-backend-message",o.classList.add("alert"),o.classList.add(t),o.style.marginTop="",o.style.maxWidth="500px",o.style.top="10px",o.innerHTML=n,o.role="alert",void i.insertBefore(o,i.firstChild);var t,n,i,o,a;(a=document.getElementById("reset-password-wrapper")).parentElement.removeChild(a),se.className="user-access-box-wrapper",se.innerHTML=' \n   <h5 id="reset-password-verification-title" class="user-access-box-wrapper-title horizontal-line ">\n        Password changed\n   </h5>\n   <div id="reset-password-confirmation-text-wrapper" class="container text-center">\n      <p class="user-access-text">\n        Login with you new password.\n        <p>\n         <a href="/"> Back to Home page</a>\n        </p>\n      </p>\n   </div>'})).catch((function(e){ue(),ae.disabled=!1,window.dispatchEvent(new Event(o.SERVER_ERROR))}))):u(e.value)?(de.style.display="",le.style.display="none",e.classList.add("is-invalid")):m(e.value)&&(de.style.display="none",le.style.display="",e.classList.add("is-invalid")));var e,t,n,a,s,d,l})),oe.addEventListener("input",(function(){if(ce)return u(oe.value)?(de.style.display="",void(le.style.display="none")):m(oe.value)?(de.style.display="none",le.style.display="",void oe.classList.add("is-invalid")):void oe.classList.remove("is-invalid")})))}});
//# sourceMappingURL=generics.js.map